const { Client } = require('pg');
require('dotenv').config();

const SQL = `
CREATE TABLE IF NOT EXISTS authors (
  id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name VARCHAR(25) NOT NULL
);

CREATE TABLE IF NOT EXISTS genres (
  id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  genre VARCHAR(20) NOT NULL,
  image VARCHAR(20)
);

CREATE TABLE IF NOT EXISTS books (
  id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  title VARCHAR(50) NOT NULL,
  pages INTEGER NOT NULL,
  plot TEXT,
  author_id INTEGER REFERENCES authors(id)
);

CREATE TABLE IF NOT EXISTS books_genres (
  book_id INTEGER REFERENCES books(id),
  genre_id INTEGER REFERENCES genres(id),
  CONSTRAINT unique_genre_book UNIQUE (book_id, genre_id)
);

INSERT INTO genres (genre, image)
VALUES
  ('Action/Adventure', 'adventure.jpeg'), ('Biography', 'biography.jpg'), ('Classic', 'classic.jpg'), ('Comic/Graphic Novel', 'comics.jpg'), ('Dystopian', 'dystopia.jpg'), ('Essay', 'essay.jpg'), ('Fantasy', 'fantasy.jpg'), ('Historical Fiction', 'historical.jpg'), ('Horror', 'horror.jpg'), ('Mystery', 'mystery.jpg'), ('Poetry', 'poetry.jpg'), ('Romance', 'romance.jpg'), ('Science Fiction', 'sciencefiction.jpg'), ('Suspense/Thriller', 'thriller.jpg'), ('Children\''s Book', 'childrenbook.jpg'); 

INSERT INTO authors (name)
VALUES
  ('Agatha Christie'), ('Antoine de Saint-Exupéry'), ('Cao Xueqin'), ('Charles Dickens'), ('J. K. Rowling'), 
  ('J. R. R. Tolkien'), ('Lewis Carroll'), ('Paulo Coelho'), ('Anna Sewell'), ('C. S. Lewis'), 
  ('Dan Brown'), ('Gabriel Garcia Marquez'), ('H. Rider Haggard'), ('J. D. Salinger'), ('J. P. Donleavy'), 
  ('Jack Higgins'), ('Johanna Spyri'), ('Lucy Maud Montgomery'), ('Richard Adams'), ('Robert James Waller'), 
  ('Umberto Eco'), ('Vladimir Nabokov'), ('Banana Yoshimoto'), ('Beatrix Potter'), ('Carlo Collodi'), 
  ('Chinua Achebe'), ('Colleen McCullough'), ('Daphne du Maurier'), ('Elbert Hubbard'), ('Eric Carle'), 
  ('Erica Jong'), ('Erich Segal'), ('F. Scott Fitzgeral'), ('Frank Herbert'), ('Gillian Flynn'), 
  ('Harper Lee'), ('Irving Stone'), ('Ivan Yefremov'), ('Jacqueline Susann'), ('J. H. Bernardin'), 
  ('James Redfield'), ('Jane Austen'), ('Jaroslav Hasek'), ('Jeffrey Archer'), ('Jiang Rong'), 
  ('John Green'), ('Jostein Gaarder'), ('Kenneth Grahame'), ('Khaled Hosseini'), ('Leo Tolstoy'), 
  ('Margaret Mitchell'), ('Marilyn French'), ('Mario Puzo'), ('Mark Twain'), ('Maurice Sendak'), 
  ('Natsume Soseki'), ('Paula Hawkins'), ('Peter Benchley'), ('Richard Bach'), ('Roald Dahl'), 
  ('Robert Munsch'), ('Stieg Larsson'), ('Sue Townsend'), ('Suzanne Collins'), ('Tetsuko Kuroyanagi'), 
  ('V. C. Andrews'), ('William Bradford Huie'), ('William P. Young'), ('Albert Camus'), ('Alice Sebold'), 
  ('Anthony Doerr'), ('Astrid Lindgren'), ('Carlos Ruiz Zafon'), ('Dante Alighieri'), ('Delia Owens'), 
  ('Douglas Adams'), ('Dr. Seuss'), ('E. L. James'), ('Eliyahu M. Goldratt'), ('Ernest Hemingway'), 
  ('Erskine Caldwell'), ('Frank McCourt'), ('Grace Metalious'), ('Haruki Murakami'), ('Helen Fielding'), 
  ('James Clavell'), ('Janette Sebring Lowrey'), ('Jhumpa Lahiri'), ('John Boyne'), ('John Steinbeck'), 
  ('Jojo Moyes'), ('Joseph Heller'), ('Kathryn Stockett'), ('Ken Follett'), ('Lois Lowry'), 
  ('Madeleine L\''Engle'), ('Margaret Wise Brown'), ('Markus Zusak'), ('Michael Ende'), ('Nicholas Evans'), 
  ('Osamu Dazai'), ('Patricia Nell Warren'), ('Patrick Süskind'), ('Ray Bradbury'), ('S. E. Hinton'), 
  ('Sam McBratney'), ('Susanna Tamaro'), ('Tomas Eloy Martinez'), ('William Peter Blatty'), ('Yann Martel');

INSERT INTO books (title, pages, plot, author_id)
VALUES
  ('A Tale of Two Cities', 428, NULL, 4),
  ('The Little Prince', 96, NULL, 2),
  ('The Alchemist', 163, NULL, 8),
  ('Harry Potter and the Philosopher\''s Stone', 223, NULL, 5),
  ('And Then There Were None', 272, NULL, 1),
  ('Dream of the Red Chamber', 992, NULL, 3),
  ('The Hobbit', 310, NULL, 6),
  ('Alice\''s Adventures in Wonderland', 352, NULL, 7),
  ('The Lion, the Witch and the Wardrobe', 172, NULL, 10),
  ('She: A History of Adventure', 317, NULL, 13),
  ('The Da Vinci Code', 489, NULL, 11),
  ('Harry Potter and the Chamber of Secrets', 251, NULL, 5),
  ('The Catcher in the Rye', 234, NULL, 14),
  ('Harry Potter and the Prisoner of Azkaban', 317, NULL, 5),
  ('Harry Potter and the Goblet of Fire', 636, NULL, 5),
  ('Harry Potter and the Order of Phoenix', 766, NULL, 5),
  ('Harry Potter and the Half-Blood Prince', 607, NULL, 5),
  ('Harry Potter and the Deathly Hallows', 607, NULL, 5),
  ('The Bridges of Madison County', 192, NULL, 20),
  ('One Hundred Years of Solitude', 422, NULL, 12),
  ('Lolita', 336, NULL, 22),
  ('Heidi', 352, NULL, 17),
  ('Anne of Green Gables', 448, NULL, 18),
  ('Black Beauty', 255, NULL, 9),
  ('The Name of the Rose', 512, NULL, 21),
  ('The Eagle Has Landed', 352, NULL, 16),
  ('Watership Down', 413, NULL, 19),
  ('The Ginger Man', 448, NULL, 15),
  ('The Tale of Peter Rabbit', 56, NULL, 24),
  ('Jonathan Livingston Seagull', 144, NULL, 59),
  ('The Very Hungry Caterpillar', 22, NULL, 30),
  ('A Message to Garcia', 42, NULL, 29),
  ('To Kill a Mockingbird', 281, NULL, 36),
  ('Flowers in the Attic', 400, NULL, 66),
  ('Sophie\''s World', 518, NULL, 47),
  ('Angels & Demons', 768, NULL, 11),
  ('Kane and Abel', 512, NULL, 44),
  ('War and Peace', 1225, NULL, 50),
  ('The Adventures of Pinocchio', 142, NULL, 25),
  ('The Thorn Birds', 692, NULL, 27),
  ('The Kite Runner', 371, NULL, 49),
  ('Valley of the Dolls', 442, NULL, 39),
  ('The Great Gatsby', 208, NULL, 33),
  ('Gone with the Wind', 1037, NULL, 51),
  ('Rebecca', 416, NULL, 28),
  ('The Revolt of Mamie Stover', 248, NULL, 67),
  ('The Girl with the Dragon Tattoo', 544, NULL, 62),
  ('The Lost Symbol', 528, NULL, 11),
  ('The Hunger Games', 374, NULL, 64),
  ('James and the Giant Peach', 160, NULL, 60),
  ('Paul et Virginie', 480, NULL, 40),
  ('Lust for Life', 513, NULL, 37),
  ('The Wind in the Willows', 260, NULL, 48),
  ('Totto-Chan: The Little Girl at the Window', 232, NULL, 65),
  ('The Celestine Prophecy', 288, NULL, 41),
  ('The Fault in Our Stars', 313, NULL, 46),
  ('The Girl on the Train', 317, NULL, 57),
  ('The Shack', 256, NULL, 68),
  ('The Godfather', 448, NULL, 53),
  ('Love Story', 131, NULL, 32),
  ('Catching Fire', 391, NULL, 64),
  ('Mockingjay', 390, NULL, 64),
  ('Kitchen', 226, NULL, 23),
  ('Andromeda Nebula', 399, NULL, 38),
  ('Gone Girl', 432, NULL, 35),
  ('Things Fall Apart', 209, NULL, 26),
  ('Wolf Totem', 544, NULL, 45),
  ('Jaws', 278, NULL, 58),
  ('Love You Forever', 31, NULL, 61),
  ('The Women\''s Room', 496, NULL, 52),
  ('Adventures of Huckleberry Finn', 362, NULL, 54),
  ('The Secret Diary of Adrian Mole, Aged 13 3/4', 259, NULL, 63),
  ('Pride and Prejudice', 448, NULL, 42),
  ('The Good Soldier Svejk', 228, NULL, 43),
  ('Where the Wild Things Age', 40, NULL, 55),
  ('Fear of Flying', 340, NULL, 31),
  ('Dune', 412, NULL, 34),
  ('Charlie and the Chocolate Factory', 192, NULL, 60),
  ('Kokoro', 256, NULL, 56),
  ('Where the Crawdads Sings', 368, NULL, 75),
  ('Follow Your Heart', 160, NULL, 107),
  ('Matilda', 240, NULL, 60),
  ('The Book Thief', 584, NULL, 98),
  ('The Horse Whisperer', 678, NULL, 100),
  ('Goodnight Moon', 32, NULL, 97),
  ('The Neverending Story', 400, NULL, 99),
  ('All the Light We Cannot See', 544, NULL, 71),
  ('Fifty Shades of Grey', 514, NULL, 78),
  ('The Outsiders', 192, NULL, 105),
  ('Guess How Much I Love You', 32, NULL, 106),
  ('Shogun', 1152, NULL, 86),
  ('The Poky Little Puppy', 24, NULL, 87),
  ('The Pillars of the Earth', 806, NULL, 94),
  ('Perfume', 263, NULL, 103),
  ('The Grapes of Wrath', 464, NULL, 90),
  ('The Shadow of the Wind', 565, NULL, 73),
  ('Interpreter of Maladies', 198, NULL, 88),
  ('The Hitchhiker\''s Guid to the Galaxy', 224, NULL, 76),
  ('God\''s Little Acre', 224, NULL, 81),
  ('A Wrinkle in Time', 238, NULL, 96),
  ('The Old Man and the Sea', 128, NULL, 80),
  ('Momo', 240, NULL, 99),
  ('Peyton Place', 372, NULL, 83),
  ('The Giver', 179, NULL, 95),
  ('Me Before you', 480, NULL, 91),
  ('Norwegian Wood', 296, NULL, 84),
  ('The Plague', 308, NULL, 69),
  ('No Longer Human', 176, NULL, 101),
  ('The Divine COmedy', 300, NULL, 74),
  ('The Boy in the Striped Pyjamas', 216, NULL, 89),
  ('The Exorcist', 340, NULL, 109),
  ('Fifty Shades Darker', 544, NULL, 78),
  ('Tobacco Road', 108, NULL, 81),
  ('Ronia, the Robber\''s Daughter', 235, NULL, 72),
  ('The Cat in the Hat', 61, NULL, 77),
  ('The Help', 524, NULL, 93),
  ('Catch-22', 453, NULL, 92),
  ('The Stranger', 159, NULL, 69),
  ('Eye of the Needle', 339, NULL, 94),
  ('The Lovely Bones', 328, NULL, 70),
  ('Santa Evita', 398, NULL, 108),
  ('Life of Pi', 356, NULL, 110),
  ('The Front Runner', 346, NULL, 102),
  ('The Goal', 384, NULL, 79),
  ('Fahrenheit 451', 156, NULL, 104),
  ('Angela\''s Ashes', 368, NULL, 82),
  ('Bridget Jone\''s Diary', 310, NULL, 85);

INSERT INTO books_genres (book_id, genre_id)
VALUES
  (1, 8), 
  (2, 7), (2, 15),
  (3, 7),
  (4, 7),
  (5, 10),
  (6, 3),
  (7, 7),
  (8, 7),
  (9, 7), (9, 15),
  (10, 1),
  (11, 10), (11, 14),
  (12, 7),
  (13, 3),
  (14, 7),
  (15, 7),
  (16, 7),
  (17, 7),
  (18, 7),
  (19, 12),
  (20, 7),
  (21, 9),
  (22, 15),
  (23, 15),
  (24, 15),
  (25, 8), (25, 10),
  (26, 14),
  (27, 7),
  (28, 3),
  (29, 15),
  (30, 1),
  (31, 15), (31, 4),
  (32, 6),
  (33, 14),
  (34, 9),
  (35, 10),
  (36, 10), (36, 14),
  (37, 10), (37, 14),
  (38, 8),
  (39, 7), (39, 15),
  (40, 12),
  (41, 8),
  (42, 12),
  (43, 8),
  (44, 8),
  (45, 10),
  (46, 10),
  (47, 14),
  (48, 14),
  (49, 5), (49, 13), (49, 1), (49, 14),
  (50, 15),
  (51, 12),
  (52, 2),
  (53, 15),
  (54, 2),
  (55, 10),
  (56, 12),
  (57, 14),
  (58, 14),
  (59, 14), (59, 10),
  (60, 12),
  (61, 5), (61, 13), (61, 1), (61, 14),
  (62, 5), (62, 13), (62, 1), (62, 14),
  (63, 3),
  (64, 13),
  (65, 14),
  (66, 8),
  (67, 2),
  (68, 14),
  (69, 15),
  (70, 6),
  (71, 15),
  (72, 15),
  (73, 12),
  (74, 8),
  (75, 15), (75, 4),
  (76, 12),
  (77, 13),
  (78, 7), (78, 15),
  (79, 8),
  (80, 10),
  (81, 3),
  (82, 15),
  (83, 8),
  (84, 1),
  (85, 15),
  (86, 15),
  (87, 8),
  (88, 12),
  (89, 3),
  (90, 15),
  (91, 8),
  (92, 15),
  (93, 8),
  (94, 8), (94, 7),
  (95, 8),
  (96, 10),
  (97, 8),
  (98, 13),
  (99, 8),
  (100, 7),
  (101, 3),
  (102, 15),
  (103, 12),
  (104, 5),
  (105, 12),
  (106, 12),
  (107, 3),
  (108, 2),
  (109, 11),
  (110, 8),
  (111, 9),
  (112, 12),
  (113, 8),
  (114, 15),
  (115, 15), (115, 4),
  (116, 8),
  (117, 8),
  (118, 3),
  (119, 14),
  (120, 10), (120, 14),
  (121, 2),
  (122, 1),
  (123, 12),
  (124, 2),
  (125, 5),
  (126, 2),
  (127, 12);
`;

async function main() {
  const client = new Client({
    connectionString: process.env.LOCAL_DB,
  });
  await client.connect();
  await client.query(SQL);
  await client.end();
}

main();
